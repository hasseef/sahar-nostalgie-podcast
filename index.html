import React, { useMemo, useState } from "react";

// ---- Project Assets (replace with your public URLs or /public paths) ----
// ملاحظة: على GitHub Pages لمستودع فرعي، لا تبدأ المسارات بـ "/".
const ASSETS = {
  logoPrimary: "./assets/nostalgie-logo-1.png",
  logoSecondary: "./assets/nostalgie-logo-2.png",
  hostPortrait: "./assets/host-sahar.jpg",
  coverDefault: "./assets/cover-default.jpg",
};

// Single-file React landing page for "بودكاست سحر نوستلجي"
// TailwindCSS styling; no external UI libs required.
// Replace links and episode data with your real content.

export default function NostalgiaMagicLanding() {
  const [query, setQuery] = useState("");
  const episodes = useMemo(
    () => [
      {
        id: 1,
        title: "الحلقة 01 — سحر طفولتنا في التسعينات",
        date: "2025-10-01",
        duration: "34:12",
        summary:
          "نسترجع ألعاب الطيبين، مسلسلات الكرتون، ونحكي قصص مواقف صنعت هويتنا اليوم.",
        tags: ["طفولة", "التسعينات", "ذكريات"],
        youtube: "https://youtube.com/placeholder-ep1",
        audio: "https://cdn.example.com/audio/ep1.mp3",
        cover:
          "https://images.unsplash.com/photo-1520975922284-9bcd8b85c278?q=80&w=1200&auto=format&fit=crop"
      },
      {
        id: 2,
        title: "الحلقة 02 — موسيقى زمان اللي ما ننساها",
        date: "2025-10-15",
        duration: "41:05",
        summary:
          "نغوص في ألبومات شكلت ذائقتنا وكيف أثرت في مشاعرنا ومناسباتنا.",
        tags: ["موسيقى", "نوستلجيا"],
        youtube: "https://youtube.com/placeholder-ep2",
        audio: "https://cdn.example.com/audio/ep2.mp3",
        cover:
          "https://images.unsplash.com/photo-1511671782779-c97d3d27a1d4?q=80&w=1200&auto=format&fit=crop"
      },
      {
        id: 3,
        title: "الحلقة 03 — ضيفنا من الأرشيف",
        date: "2025-11-01",
        duration: "50:44",
        summary:
          "حوار ممتع مع ضيف عاش التفاصيل الصغيرة والكبيرة في ذلك الزمن.",
        tags: ["حوار", "قصص"],
        youtube: "https://youtube.com/placeholder-ep3",
        audio: "https://cdn.example.com/audio/ep3.mp3",
        cover:
          "https://images.unsplash.com/photo-1505740420928-5e560c06d30e?q=80&w=1200&auto=format&fit=crop"
      }
    ],
    []
  );

  const filtered = useMemo(() => {
    const q = query.trim();
    if (!q) return episodes;
    // Arabic + English search friendly
    return episodes.filter((e) =>
      [e.title, e.summary, e.tags.join(" ")].join(" ").toLowerCase().includes(q.toLowerCase())
    );
  }, [episodes, query]);

  return (
    <main className="min-h-screen bg-gradient-to-b from-stone-50 to-white text-stone-900 antialiased">
      <Header />

      {/* Hero */}
      <section className="relative overflow-hidden">
        <div className="absolute inset-0 -z-10 opacity-20 [mask-image:radial-gradient(60%_60%_at_50%_30%,black,transparent)]">
          <PatternGrid />
        </div>
        <div className="container mx-auto px-4 py-24 md:py-32">
          <div className="grid md:grid-cols-2 gap-10 items-center">
            <div className="order-2 md:order-1 text-center md:text-right">
              <h1 className="text-3xl md:text-5xl font-black leading-tight">
                بودكاست <span className="text-rose-600">سحر نوستلجي</span>
              </h1>
              <p className="mt-4 text-lg md:text-xl text-stone-600">
                نعيد لك لحظات الفرح، الأصوات والروائح التي علّمتنا معنى الذكرى الجميلة.
              </p>
              <div className="mt-6 flex flex-wrap items-center justify-center md:justify-end gap-3">
                <PlatformButton label="استمع على Spotify" href="#platforms" icon={<SpotifyIcon />} />
                <PlatformButton label="شاهد على YouTube" href="#episodes" icon={<YouTubeIcon />} />
                <a
                  href="#subscribe"
                  className="inline-flex items-center gap-2 rounded-2xl border border-stone-300 px-4 py-2 text-sm hover:bg-stone-100 transition"
                >
                  اشترك للتحديثات
                </a>
              </div>
              <div className="mt-6">
                <Search value={query} onChange={setQuery} />
              </div>
            </div>

            <div className="order-1 md:order-2">
              <div className="relative mx-auto max-w-xl">
                <img
                  src={ASSETS.logoSecondary}
                  alt="Microphone and cassette tapes"
                  className="w-full rounded-3xl shadow-2xl"
                />
                <div className="absolute -bottom-5 -left-5 bg-white/90 backdrop-blur rounded-2xl shadow p-4 text-sm">
                  <span className="font-bold">3</span> حلقات منشورة — المزيد قريبًا
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* Episodes */}
      <section id="episodes" className="container mx-auto px-4 py-16">
        <SectionHeader title="أحدث الحلقات" subtitle="استكشف الحلقات وشاركنا ذكرياتك" />
        <div className="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
          {filtered.map((ep) => (
            <article key={ep.id} className="group rounded-3xl border border-stone-200 overflow-hidden hover:shadow-xl transition bg-white">
              <div className="aspect-[16/9] overflow-hidden">
                <img src={ep.cover} alt={ep.title} className="w-full h-full object-cover group-hover:scale-105 transition" />
              </div>
              <div className="p-5">
                <div className="flex items-center justify-between text-xs text-stone-500">
                  <time dateTime={ep.date}>{new Date(ep.date).toLocaleDateString("ar-SA", { year: "numeric", month: "long", day: "numeric" })}</time>
                  <span>{ep.duration}</span>
                </div>
                <h3 className="mt-2 text-lg font-bold leading-snug">{ep.title}</h3>
                <p className="mt-1 text-sm text-stone-600 line-clamp-2">{ep.summary}</p>
                <div className="mt-4 flex items-center gap-3">
                  <a
                    href={ep.audio}
                    className="inline-flex items-center gap-2 rounded-xl bg-stone-900 text-white px-3 py-2 text-sm hover:opacity-90"
                  >
                    <PlayIcon />
                    استمع الآن
                  </a>
                  <a
                    href={ep.youtube}
                    className="inline-flex items-center gap-2 rounded-xl border border-stone-300 px-3 py-2 text-sm hover:bg-stone-100"
                  >
                    <YouTubeIcon />
                    مشاهدة
                  </a>
                </div>
                <div className="mt-3 flex flex-wrap gap-2">
                  {ep.tags.map((t) => (
                    <span key={t} className="inline-block rounded-full bg-stone-100 px-3 py-1 text-xs text-stone-700">
                      #{t}
                    </span>
                  ))}
                </div>
              </div>
            </article>
          ))}
        </div>
      </section>

      {/* About & Guests */}
      <section id="about" className="bg-stone-50/60 border-y border-stone-200">
        <div className="container mx-auto px-4 py-16 grid md:grid-cols-2 gap-10 items-center">
          <div className="order-2 md:order-1">
            <h2 className="text-2xl md:text-3xl font-extrabold">عن البودكاست</h2>
            <p className="mt-3 text-stone-700 leading-relaxed">
              "سحر نوستلجي" مساحة حنين راقية نرجع فيها للذكريات الجميلة ونوثّق قصصًا تصنع
              الإلهام للحاضر. حلقاتنا مرئية على يوتيوب وصوتية على مختلف المنصات.
            </p>
            <ul className="mt-5 space-y-2 text-stone-700">
              <li>• إنتاج احترافي، وسرد قصصي بإحساس.</li>
              <li>• ضيوف عاشوا تفاصيل الأيام الحلوة.</li>
              <li>• فقرات ثابتة: ذاكرة صوت، ركن شريط كاسيت، وحكايا المستمعين.</li>
            </ul>
            <div className="mt-6 flex gap-3" id="platforms">
              <StoreBadge label="Spotify" href="https://open.spotify.com/show/" svg={<SpotifyIcon />} />
              <StoreBadge label="Apple Podcasts" href="https://podcasts.apple.com/" svg={<AppleIcon />} />
              <StoreBadge label="YouTube" href="https://www.youtube.com/@sahar_nostalgie.podcast" svg={<YouTubeIcon />} />
            </div>
          </div>
          <div className="order-1 md:order-2">
            <div className="grid grid-cols-3 gap-4">
              {[
              ASSETS.hostPortrait,
              ASSETS.coverDefault,
              ASSETS.logoSecondary,
              ASSETS.logoPrimary,
              ASSETS.coverDefault,
              ASSETS.hostPortrait,
            ].map((src, i) => (
                <img key={i} src={src} alt="guest" className="w-full h-28 object-cover rounded-2xl" />
              ))}
            </div>
            <p className="mt-3 text-center text-sm text-stone-500">لقطات من الضيوف والأجواء</p>
          </div>
        </div>
      </section>

      {/* Subscribe */}
      <section id="subscribe" className="container mx-auto px-4 py-16">
        <SectionHeader title="اشترك ليصلك الجديد" subtitle="نداء لطيف لعشّاق الذكريات" />
        <form
          className="mx-auto max-w-xl rounded-3xl border border-stone-200 bg-white p-4 sm:p-6 flex flex-col sm:flex-row gap-3"
          onSubmit={(e) => e.preventDefault()}
        >
          <input
            type="email"
            required
            placeholder="بريدك الإلكتروني"
            className="flex-1 rounded-2xl border border-stone-300 px-4 py-3 focus:outline-none focus:ring-2 focus:ring-rose-500"
          />
          <button
            type="submit"
            className="rounded-2xl bg-rose-600 px-5 py-3 text-white font-semibold hover:bg-rose-700"
            aria-label="اشترك"
          >
            اشترك
          </button>
        </form>
      </section>

      {/* Contact */}
      <section id="contact" className="bg-stone-900 text-white">
        <div className="container mx-auto px-4 py-14 grid md:grid-cols-3 gap-8">
          <div className="md:col-span-2">
            <h3 className="text-xl font-bold">تواصل معنا</h3>
            <p className="mt-2 text-stone-300">
              عندك قصة أو ذكرى تبغى نعرضها؟ راسلنا وخلّنا نسمع منك.
            </p>
            <div className="mt-4 grid sm:grid-cols-2 gap-3">
              <input className="rounded-xl bg-stone-800 border border-stone-700 px-4 py-3" placeholder="اسمك" />
              <input className="rounded-xl bg-stone-800 border border-stone-700 px-4 py-3" placeholder="البريد" />
              <textarea className="sm:col-span-2 rounded-xl bg-stone-800 border border-stone-700 px-4 py-3" rows={4} placeholder="رسالتك" />
              <button className="sm:col-span-2 rounded-xl bg-white text-stone-900 px-4 py-3 font-semibold hover:opacity-90">
                إرسال
              </button>
            </div>
          </div>
          <div>
            <h4 className="font-bold">روابط سريعة</h4>
            <ul className="mt-3 space-y-2 text-stone-300">
              <li><a href="#episodes" className="hover:text-white">الحلقات</a></li>
              <li><a href="#about" className="hover:text-white">عن البودكاست</a></li>
              <li><a href="#subscribe" className="hover:text-white">اشترك</a></li>
            </ul>
            <h4 className="mt-6 font-bold">تابعنا</h4>
            <div className="mt-2 flex gap-3">
              <SocialIcon label="YouTube" href="https://www.youtube.com/@sahar_nostalgie.podcast" svg={<YouTubeIcon />} />
              <SocialIcon label="X" href="https://x.com/sa_alenaizi" svg={<XIcon />} />
              <SocialIcon label="Instagram" href="https://www.instagram.com/sa.alenaizi_official" />
              <SocialIcon label="Instagram" href="https://www.instagram.com/sahar_nostalgie.podcast" svg={<InstagramIcon />} />
            </div>
          </div>
        </div>
        <div className="border-t border-stone-800">
          <div className="container mx-auto px-4 py-6 text-center text-sm text-stone-400">
            © {new Date().getFullYear()} بودكاست سحر نوستلجي — كل الحقوق محفوظة
          </div>
        </div>
      </section>
    </main>
  );
}

function Header() {
  return (
    <header className="sticky top-0 z-50 backdrop-blur bg-white/70 border-b border-stone-200">
      <div className="container mx-auto px-4 py-3 flex items-center justify-between">
        <a href="#" className="flex items-center gap-3">
          {/* استخدم الشعار الخاص بالبودكاست */}
          <img src={ASSETS.logoPrimary} alt="سحر نوستلجي" className="h-8 w-auto" />
        </a>
        <nav className="hidden md:flex items-center gap-6 text-sm text-stone-700">
          <a href="#episodes" className="hover:text-stone-900">الحلقات</a>
          <a href="#about" className="hover:text-stone-900">عنّا</a>
          <a href="#subscribe" className="hover:text-stone-900">اشترك</a>
          <a href="#contact" className="hover:text-stone-900">تواصل</a>
        </nav>
        <a
          href="#episodes"
          className="inline-flex items-center gap-2 rounded-2xl bg-stone-900 text-white px-3 py-2 text-sm hover:opacity-90"
        >
          <HeadphonesIcon />
          استمع الآن
        </a>
      </div>
    </header>
  );
}

function SectionHeader({ title, subtitle }) {
  return (
    <div className="mb-8 text-center md:text-right">
      <h2 className="text-2xl md:text-3xl font-extrabold">{title}</h2>
      {subtitle && <p className="mt-2 text-stone-600">{subtitle}</p>}
    </div>
  );
}

function PlatformButton({ label, href, icon }) {
  return (
    <a
      href={href}
      className="inline-flex items-center gap-2 rounded-2xl border border-stone-300 bg-white px-4 py-2 text-sm hover:bg-stone-100 transition"
    >
      <span className="inline-block w-4 h-4">{icon}</span>
      {label}
    </a>
  );
}

function StoreBadge({ label, href, svg }) {
  return (
    <a
      href={href}
      className="inline-flex items-center gap-2 rounded-2xl border border-stone-300 bg-white px-4 py-2 text-sm hover:bg-stone-100"
    >
      <span className="w-4 h-4 inline-block">{svg}</span>
      {label}
    </a>
  );
}

function SocialIcon({ label, href, svg }) {
  return (
    <a
      aria-label={label}
      href={href}
      className="inline-flex items-center justify-center w-10 h-10 rounded-full border border-stone-700 bg-stone-800 hover:bg-stone-700"
    >
      <span className="w-5 h-5 inline-block">{svg}</span>
    </a>
  );
}

function Search({ value, onChange }) {
  return (
    <div className="relative max-w-lg ml-auto">
      <input
        type="search"
        value={value}
        onChange={(e) => onChange(e.target.value)}
        placeholder="ابحث داخل الحلقات…"
        className="w-full rounded-2xl border border-stone-300 bg-white px-4 py-3 pr-10 focus:outline-none focus:ring-2 focus:ring-rose-500"
      />
      <div className="absolute right-3 top-1/2 -translate-y-1/2">
        <SearchIcon />
      </div>
    </div>
  );
}

/* ---- Simple SVG Icons (no external deps) ---- */
function PlayIcon()() {
  return (
    <svg viewBox="0 0 24 24" className="w-4 h-4" fill="currentColor" aria-hidden>
      <path d="M8 5v14l11-7z" />
    </svg>
  );
}
function YouTubeIcon() {
  return (
    <svg viewBox="0 0 24 24" className="w-4 h-4" fill="currentColor" aria-hidden>
      <path d="M23.5 6.2a3 3 0 0 0-2.1-2.1C19.6 3.5 12 3.5 12 3.5s-7.6 0-9.4.6A3 3 0 0 0 .5 6.2 31 31 0 0 0 0 12a31 31 0 0 0 .5 5.8 3 3 0 0 0 2.1 2.1c1.8.6 9.4.6 9.4.6s7.6 0 9.4-.6a3 3 0 0 0 2.1-2.1A31 31 0 0 0 24 12a31 31 0 0 0-.5-5.8zM9.8 15.5V8.5L15.5 12l-5.7 3.5z" />
    </svg>
  );
}
function SpotifyIcon() {
  return (
    <svg viewBox="0 0 24 24" className="w-4 h-4" fill="currentColor" aria-hidden>
      <path d="M12 1.8A10.2 10.2 0 1 0 22.2 12 10.2 10.2 0 0 0 12 1.8zm4.6 14.9a.9.9 0 0 1-1.2.3 10.8 10.8 0 0 0-8.4-.9.9.9 0 1 1-.5-1.8 12.6 12.6 0 0 1 9.8 1 .9.9 0 0 1 .3 1.4zm1.7-3.2a1 1 0 0 1-1.3.3 13.6 13.6 0 0 0-10.6-1.1 1 1 0 1 1-.6-1.9 15.6 15.6 0 0 1 12.2 1.2 1 1 0 0 1 .3 1.5zm.2-3.4A1.2 1.2 0 0 1 17 10a16.7 16.7 0 0 0-13.1-1.4 1.2 1.2 0 1 1-.7-2.3 19 19 0 0 1 15 1.6 1.2 1.2 0 0 1 .3 1.9z" />
    </svg>
  );
}
function AppleIcon() {
  return (
    <svg viewBox="0 0 24 24" className="w-4 h-4" fill="currentColor" aria-hidden>
      <path d="M12 2a3.6 3.6 0 0 0 2.2 3.3A3.3 3.3 0 0 1 11 8a3.5 3.5 0 0 1 1-2.6C13.2 4.2 13.8 2 12 2zM7.8 8.9C6 9.9 5 12 5 14c0 2.3 1.7 5.9 3.8 5.9.9 0 1.3-.3 2.1-.3S12.4 20 13 20c2.3 0 3.9-3.6 3.9-5.8 0-2.2-1.4-3.3-2.7-3.3-1.3 0-1.9.7-3 .7-1.1 0-1.7-.7-2.7-.7-.9 0-1.8.5-2.7 1z" />
    </svg>
  );
}
function HeadphonesIcon() {
  return (
    <svg viewBox="0 0 24 24" className="w-4 h-4" fill="currentColor" aria-hidden>
      <path d="M12 3a9 9 0 0 0-9 9v5a3 3 0 0 0 3 3h1a3 3 0 0 0 3-3v-3a3 3 0 0 0-3-3H5a7 7 0 0 1 14 0h-2a3 3 0 0 0-3 3v3a3 3 0 0 0 3 3h1a3 3 0 0 0 3-3v-5a9 9 0 0 0-9-9z" />
    </svg>
  );
}
function SearchIcon() {
  return (
    <svg viewBox="0 0 24 24" className="w-5 h-5 text-stone-400" fill="currentColor" aria-hidden>
      <path d="M21 21l-3.8-3.8m1.3-4.9a7 7 0 1 1-14 0 7 7 0 0 1 14 0z" />
    </svg>
  );
}
function XIcon() {
  return (
    <svg viewBox="0 0 24 24" className="w-4 h-4" fill="currentColor" aria-hidden>
      <path d="M4 4l7.2 8.3L4 20h2.3l5.5-5.8L16.7 20H20l-7-8 6.5-8H17l-5 5.9L6.7 4z" />
    </svg>
  );
}
function InstagramIcon() {
  return (
    <svg viewBox="0 0 24 24" className="w-4 h-4" fill="currentColor" aria-hidden>
      <path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm5 5a5 5 0 1 0 .001 10.001A5 5 0 0 0 12 7zm7-1.5a1.5 1.5 0 1 0-3 .001 1.5 1.5 0 0 0 3-.001z" />
    </svg>
  );
}

function PatternGrid() {
  return (
    <svg className="w-full h-full" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <pattern id="grid" width="32" height="32" patternUnits="userSpaceOnUse">
          <path d="M 32 0 L 0 0 0 32" fill="none" stroke="currentColor" strokeWidth="0.5" className="text-stone-300" />
        </pattern>
      </defs>
      <rect width="100%" height="100%" fill="url(#grid)" />
    </svg>
  );
}
